# Umbrales de Cobertura por MÃ³dulo - edugo-shared
# Ãšltima actualizaciÃ³n: 2025-11-20
# Generado por: SPRINT-2 Tarea 1.2

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# FORMATO
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# nombre_modulo:
#   threshold: <nÃºmero>      # Umbral mÃ­nimo (%)
#   current: <nÃºmero>        # Cobertura actual (%)
#   target: <nÃºmero>         # Objetivo a 3 meses (%)
#   status: <texto>          # Estado actual
#   priority: <texto>        # Prioridad de mejora
#   notes: <texto>           # Notas adicionales

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# MÃ“DULOS CORE (Alta Prioridad - Seguridad y Config)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

auth:
  threshold: 80
  current: 85.0
  target: 90
  status: "âœ… Cumple"
  priority: "Mantener"
  notes: "MÃ³dulo crÃ­tico de seguridad. Mantener >80%, objetivo 90%"
  actions:
    - "Agregar tests para casos de ValidateToken no cubiertos"
    - "Tests para casos edge de ExtractUserID y ExtractRole"

config:
  threshold: 75
  current: 82.9
  target: 85
  status: "âœ… Cumple"
  priority: "Mantener"
  notes: "ConfiguraciÃ³n crÃ­tica del sistema. Mantener >75%"
  actions:
    - "Mantener cobertura actual"
    - "Agregar tests para validaciones complejas"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# MÃ“DULOS DE INFRAESTRUCTURA (Alta Prioridad)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

logger:
  threshold: 90
  current: 95.8
  target: 100
  status: "âœ… Excelente"
  priority: "Mantener"
  notes: "Logging crÃ­tico. Solo falta Fatal (0%) que es difÃ­cil de testear"
  actions:
    - "Considerar test de Fatal con subprocess"
    - "Mantener 100% en funciones testeables"

lifecycle:
  threshold: 85
  current: 91.8
  target: 95
  status: "âœ… Excelente"
  priority: "Mantener"
  notes: "GestiÃ³n de recursos y cleanup. Mantener >85%"
  actions:
    - "Agregar tests de edge cases en Startup y Cleanup"

bootstrap:
  threshold: 40
  current: 29.5
  target: 60
  status: "ğŸŸ  Bajo - Mejorar"
  priority: "Alta"
  notes: "29.5% actual, muchas factories sin tests (0%)"
  actions:
    - "Prioridad 1: Tests de factories (CreateConnection, etc)"
    - "Prioridad 2: Tests de cleanup lifecycle (0%)"
    - "Prioridad 3: Tests de health checks (0%)"
    - "Objetivo inicial: 40%, luego 60%"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# MÃ“DULOS DE NEGOCIO (Media-Alta Prioridad)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

evaluation:
  threshold: 95
  current: 100.0
  target: 100
  status: "âœ… Perfecto"
  priority: "Mantener"
  notes: "100% de cobertura. Proteger con umbral alto"
  actions:
    - "Mantener 100%"
    - "Agregar tests de regresiÃ³n para cambios futuros"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# MÃ“DULOS DE BASE DE DATOS (Media Prioridad)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

database/postgres:
  threshold: 60
  current: 58.8
  target: 70
  status: "ğŸŸ¡ Cerca del umbral"
  priority: "Media"
  notes: "58.8% actual, muy cerca del objetivo 60%"
  actions:
    - "Agregar 2-3 tests de transacciones"
    - "Tests de edge cases en error handling"
    - "FÃ¡cil llegar a 60%"

database/mongodb:
  threshold: 55
  current: 54.5
  target: 65
  status: "ğŸŸ¡ Cerca del umbral"
  priority: "Media"
  notes: "54.5% actual, muy cerca del objetivo 55%"
  actions:
    - "Agregar tests de operaciones CRUD"
    - "Tests de manejo de conexiones"
    - "FÃ¡cil llegar a 55%"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# MÃ“DULOS DE INTEGRACIÃ“N (Variada Prioridad)
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

middleware/gin:
  threshold: 95
  current: 98.5
  target: 100
  status: "âœ… Excelente"
  priority: "Mantener"
  notes: "Middleware HTTP crÃ­tico. Ya casi perfecto"
  actions:
    - "Cubrir el 1.5% restante"
    - "Mantener cobertura alta"

messaging/rabbit:
  threshold: 14
  current: 14.4
  target: 50
  status: "âœ… Cumple (mejorado de 2.9%)"
  priority: "Media"
  notes: "Mejorado de 2.9% a 14.4% en Sprint 2 (+497% mejora). Continuar mejorando en sprints futuros"
  actions:
    - "âœ… Sprint 2: Agregados tests de config, DLQ helpers"
    - "Futuro: Tests de consumer bÃ¡sico"
    - "Futuro: Tests de publisher"
    - "Objetivo: 14% â†’ 30% â†’ 50%"
  estimated_effort: "3-4 horas para llegar a 30%"

testing:
  threshold: 55
  current: 59.0
  target: 65
  status: "âœ… Cumple"
  priority: "Baja"
  notes: "Test utilities, ya cumple con 59%"
  actions:
    - "Mantener cobertura actual"
    - "Agregar tests cuando se agreguen nuevos containers"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# MÃ“DULOS CON PROBLEMAS
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

common:
  threshold: 70
  current: "ERROR"
  target: 70
  status: "âŒ Tests fallan"
  priority: "Alta"
  notes: "Error en tests. Resolver antes de establecer umbral"
  actions:
    - "RESOLVER: Investigar error en tests"
    - "Posible problema con covdata tool"
    - "Una vez resuelto, establecer umbral en 70%"
  estimated_effort: "1-2 horas"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# CONFIGURACIÃ“N GLOBAL
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

global:
  default_threshold: 50
  minimum_acceptable: 30
  excellent_threshold: 80
  target_global: 65
  current_global: "~60% (estimado, excluyendo common)"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ESTRATEGIA DE MEJORA POR FASES
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

improvement_plan:
  sprint_2:
    - "Resolver error en common (1-2h)"
    - "messaging/rabbit: 2.9% â†’ 15% (3-4h)"

  sprint_3:
    - "bootstrap: 29.5% â†’ 40% (2-3h)"
    - "database/postgres: 58.8% â†’ 60% (1h)"
    - "database/mongodb: 54.5% â†’ 55% (1h)"

  sprint_4:
    - "messaging/rabbit: 15% â†’ 30% (2-3h)"
    - "bootstrap: 40% â†’ 60% (2h)"

  sprint_5:
    - "Incrementar umbrales de mÃ³dulos que cumplen"
    - "messaging/rabbit: 30% â†’ 50%"
    - "Review general y ajustes"

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# MÃ‰TRICAS DE SEGUIMIENTO
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

metrics:
  modules_meeting_threshold:
    current: 8
    target: 12

  modules_excellent:
    current: 5 # auth, logger, lifecycle, evaluation, middleware/gin
    target: 8

  modules_critical:
    current: 1 # messaging/rabbit
    target: 0

  modules_with_errors:
    current: 1 # common
    target: 0
